<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gelada Express üç∫</title>

<style>
:root{
    --primary:#f7c600;
    --dark:#0b0b0b;
    --dark2:#121212;
    --card:#1f1f1f;
    --success:#25d366;
    --danger:#ff4444;
}

/* RESET */
*{
    box-sizing:border-box;
    font-family:'Segoe UI',Arial,Helvetica,sans-serif;
}

body{
    margin:0;
    background:radial-gradient(circle at top,#1a1a1a,#000);
    color:#fff;
    padding-bottom:140px;
}

/* HEADER */
header{
    background:linear-gradient(135deg,#f7c600,#ffb300);
    color:#000;
    padding:22px;
    text-align:center;
    font-size:26px;
    font-weight:900;
}

.subheader{
    background:#0f0f0f;
    text-align:center;
    padding:10px;
    font-size:14px;
    color:var(--primary);
}

/* CONTAINER */
.container{
    padding:16px;
    max-width:650px;
    margin:auto;
}

/* TITULOS */
.section-title{
    margin:28px 0 14px;
    font-size:20px;
    font-weight:bold;
    color:var(--primary);
    border-left:5px solid var(--primary);
    padding-left:10px;
}

/* PRODUTOS */
.card{
    background:linear-gradient(160deg,#1e1e1e,#141414);
    border-radius:18px;
    padding:16px;
    margin-bottom:14px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 6px 18px rgba(0,0,0,.6);
}

.qty{
    width:70px;
    padding:10px;
    border-radius:10px;
    border:none;
    text-align:center;
    font-size:16px;
    background:#000;
    color:#fff;
}

/* INPUTS */
select,input[type=text],input[type=number]{
    width:100%;
    padding:14px;
    border-radius:14px;
    border:none;
    margin-top:10px;
    background:#1a1a1a;
    color:#fff;
}

/* BOT√ïES */
button{
    width:100%;
    padding:18px;
    background:linear-gradient(135deg,#25d366,#1ebe5d);
    border:none;
    color:#000;
    font-size:20px;
    font-weight:900;
    border-radius:18px;
    cursor:pointer;
    margin-top:20px;
}

button:hover{filter:brightness(1.1);}

.total{
    font-size:28px;
    text-align:center;
    color:var(--primary);
    margin-top:20px;
    font-weight:bold;
}

/* WHATSAPP */
.whatsapp{
    position:fixed;
    bottom:20px;
    right:20px;
    background:linear-gradient(135deg,#25d366,#1ebe5d);
    color:#000;
    width:74px;
    height:74px;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:36px;
    text-decoration:none;
    box-shadow:0 8px 24px rgba(0,0,0,.8);
}

/* PAINEL */
#painelAdmin,#modoEntregador{
    background:#111;
    border-radius:18px;
    padding:16px;
    margin-top:25px;
    display:none;
}

.estoqueItem{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-bottom:10px;
}

.estoqueItem input{
    width:80px;
    padding:6px;
    border-radius:10px;
}

.entregarBtn{
    background:var(--danger);
    color:#fff;
    border:none;
    padding:8px 14px;
    border-radius:10px;
}
</style>
</head>

<body>

<header>üç∫ Gelada Express</header>
<div class="subheader">Pedidos das 13:00 √†s 00:00 ‚Ä¢ Entrega pr√≥pria</div>

<div class="container">

<div class="section-title">üç∫ Produtos</div>
<div id="produtosContainer"></div>

<div class="section-title">üéü Cupom</div>
<input type="text" id="cupom" placeholder="Digite o cupom">

<div class="section-title">üìç Entrega</div>
<select id="bairro" onchange="calcularTotal()">
<option value="5">Centro - R$5</option>
<option value="7">Bairro A - R$7</option>
<option value="10">Bairro B - R$10</option>
<option value="12">Bairro C - R$12</option>
</select>

<button onclick="pegarLocalizacao()">üìç Usar minha localiza√ß√£o</button>

<div class="total" id="total">Total: R$ 0,00</div>

<button onclick="finalizarPedido()">Finalizar Pedido no WhatsApp</button>
<button onclick="mostrarPainelAdmin()">üîë Painel Administrativo</button>

<div id="painelAdmin">
<h3>üì¶ Painel de Estoque</h3>
<div id="estoqueAdmin"></div>
<input type="text" id="novoProdutoNome" placeholder="Nome">
<input type="number" id="novoProdutoQtd" placeholder="Qtd">
<input type="number" id="novoProdutoPreco" placeholder="Pre√ßo">
<button onclick="adicionarProduto()">‚ûï Adicionar</button>
</div>

<div id="modoEntregador">
<h3>üõµ Entregas</h3>
<div id="entregas"></div>
</div>

</div>

<a class="whatsapp" href="https://wa.me/5598981102515" target="_blank">üí¨</a>

<script>
/* === JAVASCRIPT ORIGINAL ‚Äì SEM ALTERA√á√ïES === */
let estoque = JSON.parse(localStorage.getItem("estoque")) || {
    skol:{qtd:50,preco:6.5},
    brahma:{qtd:50,preco:6.5},
    heineken:{qtd:30,preco:11},
    coca:{qtd:40,preco:6},
    amendoim:{qtd:40,preco:5}
};

let localizacao="";
let pedidosEntregador=[];

function renderizarProdutos(){
    const c=document.getElementById("produtosContainer");
    c.innerHTML="";
    for(let k in estoque){
        const p=estoque[k];
        const d=document.createElement("div");
        d.className="card";
        d.innerHTML=`${k} (R$ ${p.preco.toFixed(2)})
        <input type="number" id="${k}" class="qty" value="0" min="0" oninput="calcularTotal()">`;
        c.appendChild(d);
    }
}
renderizarProdutos();

function calcularTotal(){
    let total=0;
    for(let k in estoque){
        let i=document.getElementById(k);
        if(!i)continue;
        let q=parseInt(i.value)||0;
        if(q>estoque[k].qtd){i.value=estoque[k].qtd;q=estoque[k].qtd;}
        total+=q*estoque[k].preco;
    }
    if(cupom.value==="PRIMEIRACOMPRA"&&!localStorage.getItem("cupom_usado")) total-=5;
    total+=parseFloat(bairro.value);
    document.getElementById("total").innerText="Total: R$ "+total.toFixed(2);
}

function pegarLocalizacao(){
    navigator.geolocation.getCurrentPosition(p=>{
        localizacao=`https://maps.google.com/?q=${p.coords.latitude},${p.coords.longitude}`;
        alert("Localiza√ß√£o capturada!");
    });
}

function finalizarPedido(){
    let pedido="üç∫ Pedido Gelada Express%0A";
    pedido+=document.getElementById("total").innerText;
    window.open(`https://wa.me/5598981102515?text=${pedido}`);
}

function mostrarPainelAdmin(){
    if(prompt("Senha:")==="ADMIN123"){
        painelAdmin.style.display="block";
        atualizarPainelAdmin();
    }
}

function atualizarPainelAdmin(){
    estoqueAdmin.innerHTML="";
    for(let k in estoque){
        let p=estoque[k];
        let d=document.createElement("div");
        d.className="estoqueItem";
        d.innerHTML=`
        <input value="${k}" onchange="editarNomeProduto('${k}',this.value)">
        <input type="number" value="${p.qtd}" onchange="editarProduto('${k}','qtd',this.value)">
        <input type="number" value="${p.preco}" onchange="editarProduto('${k}','preco',this.value)">
        <button onclick="removerProduto('${k}')">üóë</button>`;
        estoqueAdmin.appendChild(d);
    }
}

function editarProduto(k,c,v){
    estoque[k][c]=parseFloat(v)||0;
    salvarEstoque();renderizarProdutos();
}

function editarNomeProduto(o,n){
    if(!n)return;
    estoque[n]=estoque[o];
    delete estoque[o];
    salvarEstoque();renderizarProdutos();atualizarPainelAdmin();
}

function adicionarProduto(){
    estoque[novoProdutoNome.value]={qtd:+novoProdutoQtd.value,preco:+novoProdutoPreco.value};
    salvarEstoque();renderizarProdutos();atualizarPainelAdmin();
}

function removerProduto(k){
    delete estoque[k];
    salvarEstoque();renderizarProdutos();atualizarPainelAdmin();
}

function salvarEstoque(){
    localStorage.setItem("estoque",JSON.stringify(estoque));
}
</script>

</body>
</html>
